line_comment ('// A token contract that implements the ERC20 standard.')
WHITE_SPACE ('\n')
line_comment ('// This contract demonstrates the creation of a token,')
WHITE_SPACE ('\n')
line_comment ('// the transferring of tokens, the querying of a balance,')
WHITE_SPACE ('\n')
line_comment ('// and the printing of the balance query result.')
WHITE_SPACE ('\n\n')
new ('new')
WHITE_SPACE (' ')
ID_NAME ('token')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n    ')
contract ('contract')
WHITE_SPACE (' ')
ID_NAME ('token')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('message_sender')
, (',')
WHITE_SPACE (' ')
ID_NAME ('total_supply')
, (',')
WHITE_SPACE (' ')
ID_NAME ('return_channel')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
new ('new')
WHITE_SPACE (' ')
ID_NAME ('allowed_channel')
, (',')
WHITE_SPACE (' ')
ID_NAME ('balances_channel')
, (',')
WHITE_SPACE (' ')
ID_NAME ('owner_channel')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n            ')
ID_NAME ('allowed_channel')
! ('!')
( ('(')
ID_NAME ('Map')
( ('(')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n            ')
ID_NAME ('owner_channel')
! ('!')
( ('(')
ID_NAME ('message_sender')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n            ')
ID_NAME ('balances_channel')
! ('!')
( ('(')
ID_NAME ('Map')
( ('(')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n            ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('balances')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('balances_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                ')
ID_NAME ('balances_channel')
! ('!')
( ('(')
WHITE_SPACE (' ')
ID_NAME ('balances')
. ('.')
ID_NAME ('insert')
( ('(')
ID_NAME ('message_sender')
, (',')
WHITE_SPACE (' ')
ID_NAME ('total_supply')
) (')')
WHITE_SPACE (' ')
) (')')
WHITE_SPACE ('\n            ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n            ')
new ('new')
WHITE_SPACE (' ')
ID_NAME ('transfer')
, (',')
WHITE_SPACE (' ')
ID_NAME ('transfer_from')
, (',')
WHITE_SPACE (' ')
ID_NAME ('approve')
, (',')
WHITE_SPACE (' ')
ID_NAME ('balance_of')
, (',')
WHITE_SPACE (' ')
ID_NAME ('allowance')
, (',')
WHITE_SPACE (' ')
ID_NAME ('contract_owner')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
ID_NAME ('transfer')
( ('(')
ID_NAME ('message_sender')
, (',')
WHITE_SPACE (' ')
ID_NAME ('to')
, (',')
WHITE_SPACE (' ')
ID_NAME ('amount')
, (',')
WHITE_SPACE (' ')
ID_NAME ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('balances')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('balances_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
new ('new')
WHITE_SPACE (' ')
ID_NAME ('x')
, (',')
WHITE_SPACE (' ')
ID_NAME ('y')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                            ')
ID_NAME ('x')
! ('!')
( ('(')
ID_NAME ('balances')
. ('.')
ID_NAME ('getOrElse')
( ('(')
ID_NAME ('message_sender')
, (',')
WHITE_SPACE (' ')
Integer ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                            ')
ID_NAME ('y')
! ('!')
( ('(')
ID_NAME ('balances')
. ('.')
ID_NAME ('getOrElse')
( ('(')
ID_NAME ('to')
, (',')
WHITE_SPACE (' ')
Integer ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                            ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('balance_of_sender')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('x')
WHITE_SPACE ('\n                              ')
; (';')
WHITE_SPACE (' ')
ID_NAME ('balance_of_receiver')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('y')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                ')
line_comment ('// Preconditions to check before the transfer goes through')
WHITE_SPACE ('\n                                ')
match ('match')
WHITE_SPACE (' ')
[ ('[')
WHITE_SPACE ('\n                                  ')
ID_NAME ('balance_of_sender')
WHITE_SPACE (' ')
>= ('>=')
WHITE_SPACE (' ')
ID_NAME ('amount')
, (',')
WHITE_SPACE ('\n                                  ')
ID_NAME ('amount')
WHITE_SPACE (' ')
> ('>')
WHITE_SPACE (' ')
Integer ('0')
, (',')
WHITE_SPACE ('\n                                  ')
ID_NAME ('balance_of_receiver')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE (' ')
ID_NAME ('amount')
WHITE_SPACE (' ')
> ('>')
WHITE_SPACE (' ')
ID_NAME ('balance_of_receiver')
WHITE_SPACE ('\n                                ')
] (']')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                    ')
[ ('[')
true ('true')
, (',')
WHITE_SPACE (' ')
true ('true')
, (',')
WHITE_SPACE (' ')
true ('true')
] (']')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                        ')
ID_NAME ('balances_channel')
! ('!')
( ('(')
WHITE_SPACE ('\n                                          ')
( ('(')
ID_NAME ('balances')
WHITE_SPACE ('\n                                          ')
. ('.')
ID_NAME ('insert')
( ('(')
ID_NAME ('message_sender')
, (',')
WHITE_SPACE (' ')
ID_NAME ('balance_of_sender')
WHITE_SPACE (' ')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('amount')
) (')')
) (')')
WHITE_SPACE ('\n                                          ')
. ('.')
ID_NAME ('insert')
( ('(')
ID_NAME ('to')
, (',')
WHITE_SPACE (' ')
ID_NAME ('balance_of_receiver')
+ ('+')
ID_NAME ('amount')
) (')')
WHITE_SPACE ('\n                                        ')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
ID_NAME ('rtn')
! ('!')
( ('(')
true ('true')
) (')')
WHITE_SPACE ('\n                                    ')
} ('}')
WHITE_SPACE ('\n                                    ')
_ ('_')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                        ')
ID_NAME ('balances_channel')
! ('!')
( ('(')
ID_NAME ('balances')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
ID_NAME ('rtn')
! ('!')
( ('(')
false ('false')
) (')')
WHITE_SPACE ('\n                                    ')
} ('}')
WHITE_SPACE ('\n                                ')
} ('}')
WHITE_SPACE ('\n                            ')
} ('}')
WHITE_SPACE ('\n                        ')
} ('}')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
line_comment ('// Same as the transfer contract but allows for the sender to be different from')
WHITE_SPACE ('\n                ')
line_comment ('// the person calling the transfer_from contract')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
ID_NAME ('transfer_from')
( ('(')
ID_NAME ('message_sender')
, (',')
WHITE_SPACE (' ')
ID_NAME ('from')
, (',')
WHITE_SPACE (' ')
ID_NAME ('to')
, (',')
WHITE_SPACE (' ')
ID_NAME ('amount')
, (',')
WHITE_SPACE (' ')
ID_NAME ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('balances')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('balances_channel')
WHITE_SPACE ('\n                      ')
; (';')
WHITE_SPACE (' ')
ID_NAME ('allowed')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('allowed_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
new ('new')
WHITE_SPACE (' ')
ID_NAME ('x')
, (',')
WHITE_SPACE (' ')
ID_NAME ('y')
, (',')
WHITE_SPACE (' ')
ID_NAME ('z')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                            ')
ID_NAME ('x')
! ('!')
( ('(')
ID_NAME ('balances')
. ('.')
ID_NAME ('getOrElse')
( ('(')
ID_NAME ('from')
, (',')
WHITE_SPACE (' ')
Integer ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                            ')
ID_NAME ('y')
! ('!')
( ('(')
ID_NAME ('allowed')
. ('.')
ID_NAME ('getOrElse')
( ('(')
ID_NAME ('from')
, (',')
WHITE_SPACE (' ')
ID_NAME ('message_sender')
, (',')
WHITE_SPACE (' ')
Integer ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                            ')
ID_NAME ('z')
! ('!')
( ('(')
ID_NAME ('balances')
. ('.')
ID_NAME ('getOrElse')
( ('(')
ID_NAME ('to')
, (',')
WHITE_SPACE (' ')
Integer ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                            ')
for ('for')
WHITE_SPACE (' ')
( ('(')
WHITE_SPACE (' ')
ID_NAME ('balance_of_sender')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('x')
WHITE_SPACE ('\n                              ')
; (';')
WHITE_SPACE (' ')
ID_NAME ('sender_allowed')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('y')
WHITE_SPACE ('\n                              ')
; (';')
WHITE_SPACE (' ')
ID_NAME ('balance_of_receiver')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('z')
WHITE_SPACE (' ')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                ')
match ('match')
WHITE_SPACE (' ')
[ ('[')
WHITE_SPACE ('\n                                  ')
ID_NAME ('balance_of_sender')
WHITE_SPACE (' ')
>= ('>=')
WHITE_SPACE (' ')
ID_NAME ('amount')
, (',')
WHITE_SPACE ('\n                                  ')
ID_NAME ('sender_allowed')
WHITE_SPACE (' ')
>= ('>=')
WHITE_SPACE (' ')
ID_NAME ('amount')
, (',')
WHITE_SPACE ('\n                                  ')
ID_NAME ('amount')
WHITE_SPACE (' ')
> ('>')
WHITE_SPACE (' ')
Integer ('0')
, (',')
WHITE_SPACE ('\n                                  ')
ID_NAME ('balance_of_receiver')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE (' ')
ID_NAME ('amount')
WHITE_SPACE (' ')
> ('>')
WHITE_SPACE (' ')
ID_NAME ('balance_of_receiver')
WHITE_SPACE ('\n                                ')
] (']')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                    ')
[ ('[')
true ('true')
, (',')
WHITE_SPACE (' ')
true ('true')
, (',')
WHITE_SPACE (' ')
true ('true')
, (',')
WHITE_SPACE (' ')
true ('true')
] (']')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                        ')
ID_NAME ('balances_channel')
! ('!')
( ('(')
WHITE_SPACE ('\n                                          ')
( ('(')
ID_NAME ('balances')
WHITE_SPACE ('\n                                          ')
. ('.')
ID_NAME ('insert')
( ('(')
ID_NAME ('from')
, (',')
WHITE_SPACE (' ')
ID_NAME ('balance_of_sender')
WHITE_SPACE (' ')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('amount')
) (')')
) (')')
WHITE_SPACE ('\n                                          ')
. ('.')
ID_NAME ('insert')
( ('(')
ID_NAME ('to')
, (',')
WHITE_SPACE (' ')
ID_NAME ('balance_of_receiver')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE (' ')
ID_NAME ('amount')
) (')')
WHITE_SPACE ('\n                                        ')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
ID_NAME ('allowed_channel')
! ('!')
( ('(')
WHITE_SPACE ('\n                                          ')
ID_NAME ('allowed')
. ('.')
ID_NAME ('insert')
( ('(')
ID_NAME ('from')
, (',')
WHITE_SPACE (' ')
ID_NAME ('message_sender')
, (',')
WHITE_SPACE (' ')
ID_NAME ('sender_allowed')
WHITE_SPACE (' ')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('amount')
) (')')
WHITE_SPACE ('\n                                        ')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
ID_NAME ('rtn')
! ('!')
( ('(')
true ('true')
) (')')
WHITE_SPACE ('\n                                    ')
} ('}')
WHITE_SPACE ('\n                                    ')
_ ('_')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                        ')
ID_NAME ('balances_channel')
! ('!')
( ('(')
ID_NAME ('balances')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
ID_NAME ('allowed_channel')
! ('!')
( ('(')
ID_NAME ('allowed')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
ID_NAME ('rtn')
! ('!')
( ('(')
false ('false')
) (')')
WHITE_SPACE ('\n                                    ')
} ('}')
WHITE_SPACE ('\n                                ')
} ('}')
WHITE_SPACE ('\n                            ')
} ('}')
WHITE_SPACE ('\n                        ')
} ('}')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
line_comment ('// This is the way an address can pre-approve (delegate) the transfer of')
WHITE_SPACE ('\n                ')
line_comment ('// a certain amount of tokens to some other address. This allows for')
WHITE_SPACE ('\n                ')
line_comment ('// that other address, through the use of the transfer_from function,')
WHITE_SPACE ('\n                ')
line_comment ('// to send up to that amount of tokens.')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
ID_NAME ('approve')
( ('(')
ID_NAME ('message_sender')
, (',')
WHITE_SPACE (' ')
ID_NAME ('spender')
, (',')
WHITE_SPACE (' ')
ID_NAME ('amount')
, (',')
WHITE_SPACE (' ')
ID_NAME ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('allowed')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('allowed_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
ID_NAME ('allowed_channel')
! ('!')
( ('(')
ID_NAME ('allowed')
. ('.')
ID_NAME ('insert')
( ('(')
ID_NAME ('message_sender')
, (',')
ID_NAME ('spender')
, (',')
ID_NAME ('amount')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                        ')
ID_NAME ('rtn')
! ('!')
( ('(')
true ('true')
) (')')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
ID_NAME ('balance_of')
( ('(')
ID_NAME ('owner')
, (',')
WHITE_SPACE (' ')
ID_NAME ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('balances')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('balances_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
ID_NAME ('rtn')
! ('!')
( ('(')
ID_NAME ('balances')
. ('.')
ID_NAME ('getOrElse')
( ('(')
ID_NAME ('owner')
, (',')
WHITE_SPACE (' ')
Integer ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                        ')
ID_NAME ('balances_channel')
! ('!')
( ('(')
ID_NAME ('balances')
) (')')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
ID_NAME ('allowance')
( ('(')
ID_NAME ('owner')
, (',')
WHITE_SPACE (' ')
ID_NAME ('spender')
, (',')
WHITE_SPACE (' ')
ID_NAME ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('allowed')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('allowed_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
ID_NAME ('allowed_channel')
! ('!')
( ('(')
ID_NAME ('allowed')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                        ')
ID_NAME ('rtn')
! ('!')
( ('(')
ID_NAME ('allowed')
. ('.')
ID_NAME ('getOrElse')
( ('(')
ID_NAME ('owner')
, (',')
ID_NAME ('spender')
, (',')
Integer ('0')
) (')')
) (')')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
ID_NAME ('contract_owner')
( ('(')
ID_NAME ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('owner')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('owner_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
ID_NAME ('owner_channel')
! ('!')
( ('(')
ID_NAME ('owner')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                        ')
ID_NAME ('rtn')
! ('!')
( ('(')
ID_NAME ('owner')
) (')')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
ID_NAME ('return_channel')
! ('!')
( ('(')
WHITE_SPACE ('\n                  ')
ID_NAME ('Map')
( ('(')
) (')')
. ('.')
ID_NAME ('insertMany')
( ('(')
StringLit ('"transfer"')
, (',')
WHITE_SPACE (' ')
ID_NAME ('transfer')
, (',')
WHITE_SPACE (' ')
StringLit ('"transfer_from"')
, (',')
WHITE_SPACE (' ')
ID_NAME ('transfer_from')
, (',')
WHITE_SPACE ('\n                  ')
StringLit ('"approve"')
, (',')
WHITE_SPACE (' ')
ID_NAME ('approve')
, (',')
WHITE_SPACE (' ')
StringLit ('"balance_of"')
, (',')
WHITE_SPACE (' ')
ID_NAME ('balance_of')
, (',')
WHITE_SPACE (' ')
StringLit ('"allowance"')
, (',')
WHITE_SPACE (' ')
ID_NAME ('allowance')
, (',')
WHITE_SPACE ('\n                  ')
StringLit ('"contract_owner"')
, (',')
WHITE_SPACE (' ')
ID_NAME ('contract_owner')
) (')')
) (')')
WHITE_SPACE ('\n                ')
line_comment ('// TODO: Eventually just insert with compiler')
WHITE_SPACE ('\n            ')
} ('}')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n    ')
new ('new')
WHITE_SPACE (' ')
ID_NAME ('rtn')
, (',')
WHITE_SPACE (' ')
ID_NAME ('me')
, (',')
WHITE_SPACE (' ')
ID_NAME ('they')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
ID_NAME ('token')
! ('!')
( ('(')
ID_NAME ('me')
, (',')
WHITE_SPACE (' ')
Integer ('100')
, (',')
WHITE_SPACE (' ')
ID_NAME ('rtn')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n        ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('token_contract')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('rtn')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n            ')
new ('new')
WHITE_SPACE (' ')
ID_NAME ('unused_rtn')
, (',')
WHITE_SPACE (' ')
ID_NAME ('balance_of_rtn')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                ')
@ ('@')
ID_NAME ('token_contract')
. ('.')
ID_NAME ('get')
( ('(')
StringLit ('"transfer"')
) (')')
! ('!')
( ('(')
ID_NAME ('me')
, (',')
WHITE_SPACE (' ')
ID_NAME ('they')
, (',')
WHITE_SPACE (' ')
Integer ('50')
, (',')
WHITE_SPACE (' ')
ID_NAME ('unused_rtn')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
@ ('@')
ID_NAME ('token_contract')
. ('.')
ID_NAME ('get')
( ('(')
StringLit ('"balance_of"')
) (')')
! ('!')
( ('(')
ID_NAME ('they')
, (',')
WHITE_SPACE (' ')
ID_NAME ('balance_of_rtn')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('they_balance')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('balance_of_rtn')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
ID_NAME ('they_balance')
. ('.')
ID_NAME ('display')
( ('(')
StringLit ('"\n"')
) (')')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE ('\n            ')
} ('}')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n    ')
new ('new')
WHITE_SPACE (' ')
ID_NAME ('rtn2')
, (',')
WHITE_SPACE (' ')
ID_NAME ('me2')
, (',')
WHITE_SPACE (' ')
ID_NAME ('they2')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
ID_NAME ('token')
! ('!')
( ('(')
ID_NAME ('me2')
, (',')
WHITE_SPACE (' ')
Integer ('1000')
, (',')
WHITE_SPACE (' ')
ID_NAME ('rtn2')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n        ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('token_contract2')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('rtn2')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n            ')
new ('new')
WHITE_SPACE (' ')
ID_NAME ('unused_rtn2')
, (',')
WHITE_SPACE (' ')
ID_NAME ('balance_of_rtn2')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                ')
@ ('@')
ID_NAME ('token_contract2')
. ('.')
ID_NAME ('get')
( ('(')
StringLit ('"transfer"')
) (')')
! ('!')
( ('(')
ID_NAME ('me2')
, (',')
WHITE_SPACE (' ')
ID_NAME ('they2')
, (',')
WHITE_SPACE (' ')
Integer ('500')
, (',')
WHITE_SPACE (' ')
ID_NAME ('unused_rtn2')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
@ ('@')
ID_NAME ('token_contract2')
. ('.')
ID_NAME ('get')
( ('(')
StringLit ('"balance_of"')
) (')')
! ('!')
( ('(')
ID_NAME ('they2')
, (',')
WHITE_SPACE (' ')
ID_NAME ('balance_of_rtn2')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
for ('for')
WHITE_SPACE (' ')
( ('(')
ID_NAME ('they_balance2')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
ID_NAME ('balance_of_rtn2')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
ID_NAME ('they_balance2')
. ('.')
ID_NAME ('display')
( ('(')
StringLit ('"\n"')
) (')')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE ('\n            ')
} ('}')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE ('\n    ')
line_comment ('// Once we have a registry, we can do registry_channel!(token) to save the contract there')
WHITE_SPACE ('\n')
} ('}')
